"use strict";function angularStarRating(){var a={restrict:"EA",scope:{value:"=value",max:"=max",hover:"=hover",isReadonly:"=isReadonly"},link:linkFunc,template:'<span ng-class="{isReadonly: isReadonly}"><i ng-class="renderObj" ng-repeat="renderObj in renderAry" ng-click="setValue($index)" ng-mouseenter="changeValue($index, changeOnHover )" ></i></span>',replace:!0};return a}function linkFunc(a,b,c,d){function e(){a.renderAry=[];for(var b=0;b<a.max;b++)b<a.value?a.renderAry.push({"fa fa-star fa-2x":!0}):a.renderAry.push({"fa fa-star-o fa-2x":!0})}void 0===a.max&&(a.max=5),a.setValue=function(b){a.isReadonly||void 0===a.isReadonly||(a.value=b+1)},a.changeValue=function(b){a.hover&&a.setValue(b)},a.$watch("value",function(a,b){a&&e()}),a.$watch("max",function(a,b){a&&e()})}angular.module("eCommerceUserApp").controller("AboutCtrl",["$cookieStore","$routeParams","Product","Category","search","Cart","$location","sessionService","$scope","$rootScope",function(a,b,c,d,e,f,g,h,i,j){var k=this,l=d.getPage,m=new l({id:b.pageid});m.$get(function(a){"success"==a.status&&(k.page=a.response.page)},function(a){"401"==a.status&&h.get("token")})}]),angular.module("eCommerceUserApp").controller("AccountCtrl",["$routeParams","Product","Main","Checkout","Account","Order","$location","sessionService","endpoint","$scope","fileUpload","$http",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a,b,c){return fetch(a).then(function(a){return a.arrayBuffer()}).then(function(a){return new File([a],b,{type:c})})}var n=this;j.myImage="",j.myCroppedImage="";var o=function(a){var b=a.currentTarget.files[0],c=new FileReader;c.onload=function(a){j.$apply(function(b){b.myImage=a.target.result})},c.readAsDataURL(b)};angular.element(document.querySelector("#fileInput")).on("change",o),n.crop=function(){m(j.myCroppedImage,"a.png","image/png").then(function(a){var b=new FormData;b.append("image",a);var c=i+"/images/upload-single-image";l.post(c,b,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(a){if("success"==a.status){n.dataLoading=!1,user.logo=a.response._id;var b=e.saveDetails,c=new b(user);c.$get().then(function(a){"success"==a.status?n.success=a:(n.dataLoading=!1,n.error=a)})}}).error(function(a,b){})})},this.close=function(){n.error="",n.success=""};var p=c.getCountry,q=new p;q.$get(function(a){n.country=a.response});var r=e.getDetails,s=new r;s.$get({guest_token:h.get("token")},function(a){"Unauthorized"==a.statusMessage&&g.path("/login"),"success"==a.status&&(n.ud=a.response,n.view=!0)},function(a){"401"==a.status&&h.get("token")});var t=f.getOrder,u=new t;u.$get({guest_token:h.get("token")},function(a){"success"==a.status&&(n.orders=a.response)},function(a){"401"==a.status&&h.get("token")}),this.updateUser=function(a){n.dataLoading=!0;j.myFile;m(j.myCroppedImage,"a.png","image/png").then(function(a){var b=i+"/images/upload-single-image";k.uploadFileToUrl(a,b,n.ud,n)})},this.updateAddress=function(a){j.header.pageLoading=!0;var b=e.putAddress,b=new b(n.edit);b.$get({guest_token:h.get("token")}).then(function(a){if("success"==a.status){n.csuccess=a;var b=e.getDetails,c=new b;c.$get({guest_token:h.get("token")},function(a){"Unauthorized"==a.statusMessage&&g.path("/login"),"success"==a.status&&(n.ud=a.response,$("#editaddress").trigger("click"),j.header.pageLoading=!1,n.success=n.csuccess)},function(a){"401"==a.status&&h.get("token")})}})},this.returnShow=function(a,c){j.header.pageLoading=!0;var d=new b.detailsReturnProduct({id:a,oid:c});d.$get(function(a){"success"==a.status&&(n.rproduct=a.response.product,j.header.pageLoading=!1)},function(a){"401"==a.status&&h.get("token")})},this.addToReturn=function(){j.header.pageLoading=!0;var a=new b.addReturn(n["return"]);a.$get({id:pid,oid:oid},function(a){"success"==a.status?(n.success=a,j.header.pageLoading=!1):n.error=a,j.header.pageLoading=!1},function(a){"401"==a.status&&h.get("token")})},this.editShow=function(a){j.header.pageLoading=!0;var b=e.getSingleAddress,c=new b({id:a});c.$get({guest_token:h.get("token")},function(a){"Unauthorized"==a.statusMessage&&g.path("/login"),"success"==a.status&&(n.edit=a.response.address[0],j.header.pageLoading=!1)},function(a){"401"==a.status&&h.get("token")})},this.addAddress=function(a){j.header.pageLoading=!0;var b=d.addAddress,b=new b(n.add);b.$get({guest_token:h.get("token")}).then(function(a){if("success"==a.status){n.ssuccess=a;var b=e.getDetails,c=new b;c.$get({guest_token:h.get("token")},function(a){"Unauthorized"==a.statusMessage&&g.path("/login"),"success"==a.status&&(n.ud=a.response,n.add="",$("#addaddress").trigger("click"),j.header.pageLoading=!1,n.success=n.ssuccess)},function(a){"401"==a.status&&h.get("token")})}})},this.removeAddress=function(a){j.header.pageLoading=!0;var b=e.deleteAddress,b=new b({id:a});b.$get({guest_token:h.get("token")}).then(function(a){if("success"==a.status){n.ssuccess=a;var b=e.getDetails,c=new b;c.$get({guest_token:h.get("token")},function(a){"Unauthorized"==a.statusMessage&&g.path("/login"),"success"==a.status&&(n.ud=a.response,n.view=!0,n.cedit=!1,n.cadd=!1,j.header.pageLoading=!1,n.success=n.ssuccess)},function(a){"401"==a.status&&h.get("token")})}})},this.changePassword=function(a){n.dataLoading=!0;var b=e.updatePassword,c=new b(n.change);c.$get().then(function(a){"success"==a.status?(n.dataLoading=!1,n.success=a):(n.dataLoading=!1,n.error=a)})},n.download_url=i}]).directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){b.$apply(function(){f(b,c[0].files[0])})})}}}]).service("fileUpload",["$http","Account",function(a,b){this.uploadFileToUrl=function(c,d,e,f){if(234!=c.size){var g=new FormData;g.append("image",c),a.post(d,g,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(a){f.dataLoading=!1,e.logo=a.response._id,$("#image_id").attr("src",a.response.cdn.secure_url);var c=b.saveDetails,d=new c(e);d.$get().then(function(a){"success"==a.status?f.success=a:(f.dataLoading=!1,f.error=a)})})}else{f.dataLoading=!1;var h=b.saveDetails,i=new h(e);i.$get().then(function(a){"success"==a.status?f.success=a:(f.dataLoading=!1,f.error=a)})}}}]),angular.module("eCommerceUserApp").controller("CancelCtrl",["$routeParams","Product","Payment","Cart","Checkout","$location","sessionService","endpoint","$scope","stripe",function(a,b,c,d,e,f,g,h,i,j){var k=b.getAdmin,l=new k;l.$get({guest_token:g.get("token")},function(a){"success"==a.status&&(i.admin=a.response)},function(a){"401"==a.status&&g.get("token")})}]),angular.module("eCommerceUserApp").controller("CartCtrl",["$routeParams","Product","Cart","$location","sessionService","$scope",function(a,b,c,d,e,f){var g=this;this.close=function(){g.status="",g.success={},g.success.status=""},this.range=function(a,b,c){c=c||1;for(var d=[],e=a;b>=e;e+=c)d.push(e);return d},e.get("coupon")&&(g.discount={},g.discount.amount=e.get("coupon_amount"),g.csuccess=e.get("coupon"));var h=c.getCart,i=new h;i.$get({guest_token:e.get("token")},function(a){if("success"==a.status){g.carts=a.response.cart;var b=0,c=0;g.carts.forEach(function(a){b+=a.selected_pricing.after_discount*a.product_quantity,c+=1==a.product_id.paid_by_buyer?a.product_id.shipping_details.fee:0}),g.totalprice=b,g.shipprice=c,g.overprice=c+b,g.pageLoading=!1}else g.carts=[],f.carts=[],g.pageLoading=!1,"Unauthorized"==a.statusMessage&&(e.destroy("token"),e.destroy("user"),e.destroy("user_token"),d.path("#/login"))},function(a){"401"==a.status&&e.get("token")}),this.checkCoupon=function(){var a=new c.CheckCoupon({coupon:g.coupon});a.$get({guest_token:e.get("token")},function(a){"success"==a.status?(e.set("coupon",g.coupon),g.discount=a.response,g.csuccess=g.coupon,e.set("coupon_amount",g.discount.amount),g.cerror=""):(e.destroy("coupon"),e.destroy("coupon_amount"),g.cerror=a.statusMessage,g.discount=0,g.csuccess="")})},this.removeCoupon=function(){e.destroy("coupon"),e.destroy("coupon_amount"),g.discount=0,g.csuccess="",g.coupon=""},this.removeCart=function(a){g.dataLoading=!0;var b=new c.RemoveCart;b.$get({guest_token:e.get("token"),cart_id:a},function(a){if("success"==a.status){g.successs=a;var b=new c.getCart;b.$get({guest_token:e.get("token")},function(a){if("success"==a.status){f.header.carts=a.response.cart,g.carts=a.response.cart;var b=0,c=0;g.carts.forEach(function(a){b+=a.product_id.pricing.after_discount*a.product_quantity,c+=1==a.product_id.paid_by_buyer?a.product_id.shipping_details.fee:0}),f.header.totalprice=b,g.totalprice=b,g.shipprice=c,g.overprice=c+b,g.dataLoading=!1,g.success=g.successs}})}},function(a){"401"==a.status&&e.get("token")})};var j=b.getBestOffer,k=new j;k.$get(function(a){if("success"==a.status){g.bestO=a.response.product;for(var b=0;b<g.bestO.length;b++){var c=g.bestO[b];g.bestO[b].totalOffer=(c.pricing.original-c.pricing.after_discount)/c.pricing.original*100}g.best_offer=g.bestO}},function(a){"401"==a.status&&e.get("token")}),this.updateCart=function(a,b){g.dataLoading=!0,f.carts=[];var h=new c.UpdateToCart({product_id:b,quantity:a});h.$get({guest_token:e.get("token")},function(a){if("Unauthorized"==a.statusMessage&&d.path("#/login"),"success"==a.status){g.successs=a;var b=new c.getCart;b.$get({guest_token:e.get("token")},function(a){if("success"==a.status){f.header.carts=a.response.cart,g.carts=a.response.cart;var b=0,c=0;g.carts.forEach(function(a){b+=a.product_id.pricing.after_discount*a.product_quantity,c+=1==a.product_id.paid_by_buyer?a.product_id.shipping_details.fee:0}),f.header.totalprice=b,g.totalprice=b,g.shipprice=c,g.overprice=c+b,g.dataLoading=!1,g.success=g.successs}})}},function(a){"401"==a.status&&(g.dataLoading=!1,e.get("token"))})},f.$on("ngRepeatFinishedcart1",function(a){$("#owl-demo").owlCarousel({autoPlay:3e3,items:4,itemsDesktop:[1199,3],itemsDesktopSmall:[979,3],navigation:!0,pagination:!1,navigationText:["<i class='fa fa-angle-left'></i>","<i class='fa fa-angle-right'></i>"]})}),f.$on("ngRepeatFinishedcart2",function(a){$("#owl-demo2").owlCarousel({autoPlay:3e3,items:4,itemsDesktop:[1199,3],itemsDesktopSmall:[979,3],navigation:!0,pagination:!1,navigationText:["<i class='fa fa-angle-left'></i>","<i class='fa fa-angle-right'></i>"]})})}]),angular.module("eCommerceUserApp").controller("CheckoutCtrl",["$routeParams","Account","dpath","Product","Payment","Main","Cart","Checkout","$location","sessionService","endpoint","$scope","$timeout","stripe",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;this.close=function(){o.error=""},j.get("coupon")&&(o.discount={},o.discount.amount=j.get("coupon_amount"),o.csuccess=j.get("coupon"));var p=f.getCountry,q=new p;q.$get(function(a){o.country=a.response});var r=g.getCart,q=new r;q.$get({guest_token:j.get("token")},function(a){if("success"==a.status){o.carts=a.response.cart;var b=0,c=0;o.carts.forEach(function(a){b+=a.selected_pricing.after_discount*a.product_quantity,c+=1==a.product_id.paid_by_buyer?a.product_id.shipping_details.fee:0}),o.totalprice=b,o.shipprice=c,o.overprice=c+b,o.pageLoading=!1}else o.carts=[],l.carts=[],o.pageLoading=!1,"Unauthorized"==a.statusMessage&&(j.destroy("token"),j.destroy("user"),j.destroy("user_token"),i.path("#/login"))},function(a){"401"==a.status&&j.get("token")});var s=h.getAddress,t=new s;t.$get({guest_token:j.get("token")},function(a){"success"==a.status&&(o.addresss=a.response.address,o.cuser=a.response)},function(a){"401"==a.status&&j.get("token")}),this.saveAddress=function(){o.pageLoading=!0;var a=h.addAddress,a=new a(o.address);a.$get({guest_token:j.get("token")}).then(function(a){if("success"==a.status){var b=h.getAddress,c=new b;c.$get({guest_token:j.get("token")},function(a){"success"==a.status&&(o.addresss=a.response.address,o.cuser=a.response,o.add_ship="last",o.pageLoading=!1)},function(a){"401"==a.status&&j.get("token")})}})};var u=d.getAdmin,t=new u;t.$get({guest_token:j.get("token")},function(a){"success"==a.status&&(l.admin=a.response)},function(a){"401"==a.status&&j.get("token")}),this.Continue=function(){if(void 0==o.add_ship||"first"==o.add_ship||"last"==o.add_ship)return o.error="error",angular.element(document.querySelector("#saddr")).addClass("animated shake"),window.setTimeout(function(){angular.element(document.querySelector("#saddr")).removeClass("animated shake")},1e3),!1;j.set("ship_address",o.add_ship),o.pageLoading=!0;var a=b.getSingleAddress,c=new a({id:o.add_ship});c.$get({guest_token:j.get("token")},function(a){"Unauthorized"==a.statusMessage&&i.path("/login"),"success"==a.status&&(o.shipaddress=a.response.address[0],o.pageLoading=!1,o.payment=!0,o.ship=!0)},function(a){"401"==a.status&&j.get("token")})},this.updateAddress=function(a){o.pageLoading=!0;var c=b.putAddress,c=new c(o.edit);c.$get({guest_token:j.get("token")}).then(function(a){if("success"==a.status){o.csuccess=a;var c=b.getDetails,d=new c;d.$get({guest_token:j.get("token")},function(a){"Unauthorized"==a.statusMessage&&i.path("/login"),"success"==a.status&&(o.addresss=a.response.address,o.cuser=a.response,$("#editaddress").trigger("click"),o.pageLoading=!1,o.success=o.csuccess)},function(a){"401"==a.status&&j.get("token")})}})},this.editShow=function(a){o.pageLoading=!0;var c=b.getSingleAddress,d=new c({id:a});d.$get({guest_token:j.get("token")},function(a){"Unauthorized"==a.statusMessage&&i.path("/login"),"success"==a.status&&(o.pageLoading=!1,o.edit=a.response.address[0])},function(a){"401"==a.status&&j.get("token")})},this.addAddress=function(a){o.pageLoading=!0;var c=h.addAddress,c=new c(o.add);c.$get({guest_token:j.get("token")}).then(function(a){if("success"==a.status){o.ssuccess=a;var c=b.getDetails,d=new c;d.$get({guest_token:j.get("token")},function(a){"Unauthorized"==a.statusMessage&&i.path("/login"),"success"==a.status&&(o.addresss=a.response.address,o.cuser=a.response,o.add="",$("#addaddress").trigger("click"),o.pageLoading=!1,o.success=o.ssuccess)},function(a){"401"==a.status&&j.get("token")})}})},this.changeShipAddress=function(){o.payment=!1,o.shipaddress=!1,o.review=!1};var r=g.getCart,q=new r;q.$get({guest_token:j.get("token")},function(a){if("success"==a.status){o.carts=a.response.cart;var b=0,c=0;o.carts.forEach(function(a){b+=a.selected_pricing.after_discount*a.product_quantity,c+=1==a.product_id.paid_by_buyer?a.product_id.shipping_details.fee:0}),o.totalprice=b,o.shipprice=c,o.overprice=c+b,o.pageLoading=!1}else j.destroy("token"),j.destroy("user"),j.destroy("user_token"),i.path("#/login")},function(a){"401"==a.status&&j.get("token")}),Stripe.setPublishableKey("pk_test_Ny36HAIYzTRPj2oCQkBQ10IY"),this.onSubmit=function(){o.pageLoading=!0},l.handleStripe=function(a,b){l.processing=!1,o.hideAlerts(),b.error?(o.pageLoading=!1,l.stripeError=b.error.message):(l.stripeToken=b.id,o.payment=!1,o.review=!0,o.pageLoading=!1)},this.stripePay=function(){o.pageLoading=!0,j.set("payment","Stripe");var a=e.saveOrder,b=new a({guest_token:j.get("token"),payment_id:l.stripeToken,payment_status:"Completed",payment_method:"stripe",coupon:j.get("coupon"),shipping:j.get("ship_address"),billing:j.get("ship_address")});b.$get(function(a){"success"==a.status?(o.pageLoading=!1,o.success=a,i.path("success")):(j.destroy("payment"),j.set("payment_error","yes"),o.pageLoading=!1,l.stripeError="Your Payment error! ",i.path("success"))},function(a){"401"==a.status&&j.get("token")})},this.hideAlerts=function(){l.stripeError=null,l.stripeToken=null},this.addFormFields=function(a,b){null!=b&&$.each(b,function(b,c){if(null!=c){var d=$("<input></input>").attr("type","hidden").attr("name",b).val(c);a.append(d)}})},this.makePayment=function(a){o.pageLoading=!0,j.set("payment","Paypal");var b=d.getAdmin,e=new b;e.$get({guest_token:j.get("token")},function(b){if("success"==b.status){o.padmin=b.response;var d=g.getCart,e=new d;e.$get({guest_token:j.get("token")},function(b){if("success"==b.status&&"payPal"==a){var d={cmd:"_cart",business:o.padmin.payment_gateway[0].email,"return":c+"success",notify_url:c+"payment/notify-order/"+j.get("user_token"),upload:1,currency_code:"USD",cancel_return:c+"cancel"},e=1;j.get("coupon")&&(d.discount_amount_cart=j.get("coupon_amount")),b.response.cart.forEach(function(a){d["item_number_"+e]=a.product_id.sku,d["item_name_"+e]=a.product_id.title,d["quantity_"+e]=a.product_quantity,d["amount_"+e]=a.selected_pricing.after_discount.toFixed(2),1==a.product_id.paid_by_buyer&&(d["shipping_"+e]=a.product_id.shipping_details.fee.toFixed(2)),e++});var f=$("<form/></form>");f.attr("action","https://www."+o.padmin.payment_gateway[0].mode+".paypal.com/cgi-bin/webscr"),f.attr("method","POST"),f.attr("style","display:none;"),o.addFormFields(f,d),$("body").append(f),f.submit(),f.remove()}})}},function(a){"401"==a.status&&j.get("token")})}}]),angular.module("eCommerceUserApp").controller("ForgotCtrl",["$routeParams","Forgot","newPassword","sessionService","$location",function(a,b,c,d,e){var f=this;this.close=function(){f.error="",f.success=""},this.forgotPass=function(){f.dataLoading=!0;var a=new b(f.forgot);a.$forgot().then(function(a){"success"==a.status?(f.dataLoading=!1,f.success=a):(f.dataLoading=!1,f.error=a)})},this.newPass=function(){f.dataLoading=!0;var a=new c(f.newpassword);a.$newpassword().then(function(a){"success"==a.status?(f.dataLoading=!1,f.success=a):(f.dataLoading=!1,f.error=a)})}}]),angular.module("eCommerceUserApp").controller("HeaderCtrl",["$cookieStore","seller","Account","$routeParams","Product","Category","search","Cart","$location","sessionService","$scope","$rootScope",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){return this.each(function(){var b=$(this),c=b.data("bs.dropdownhover"),d=b.data();void 0!==b.data("animations")&&null!==b.data("animations")&&(d.animations=$.isArray(d.animations)?d.animations:d.animations.split(" "));var e=$.extend({},x.DEFAULTS,d,"object"==typeof a&&a);c||b.data("bs.dropdownhover",c=new x(this,e))})}var n=this;n.sellerurl=b,n.user=j.get("user"),this.close=function(){n.error="",n.success=""};var o=f.getCategory,p=new o;p.$get(function(a){"success"==a.status&&(k.category=a.response.categories)},function(a){"401"==a.status&&j.get("token")});var q=e.getAdmin,r=new q;if(r.$get({guest_token:j.get("token")},function(a){"success"==a.status&&(k.admin=a.response)},function(a){"401"==a.status&&j.get("token")}),j.get("user")){var s=c.getDetails,t=new s;t.$get({guest_token:j.get("token")},function(a){"Unauthorized"==a.statusMessage&&i.path("/login"),"success"==a.status&&(n.cuser=a.response)},function(a){"401"==a.status&&j.get("token")})}n.limit=9,this.expand=function(a){n.limit+=a};var u=f.getPage,v=new u;v.$get({guest_token:j.get("token")},function(a){"success"==a.status&&(n.pages=a.response.pages)},function(a){"401"==a.status&&j.get("token")});var w=h.getCart,p=new w;p.$get({guest_token:j.get("token")},function(a){if("success"==a.status){n.carts=a.response.cart,k.carts=a.response.cart;var b=0,c=0;n.carts.forEach(function(a){b+=a.selected_pricing.after_discount*a.product_quantity,c+=1==a.product_id.paid_by_buyer?a.product_id.shipping_details.fee:0}),n.totalprice=b,n.shipprice=c,n.overprice=c+b,n.pageLoading=!1}else n.carts=[],k.carts=[],n.pageLoading=!1,"Unauthorized"==a.statusMessage&&(j.destroy("token"),j.destroy("user"),j.destroy("user_token"),i.path("#/login"))},function(a){"401"==a.status&&j.get("token")}),this.searchP=function(){j.set("q",n.srch.name),j.destroy("lprice"),j.destroy("hprice"),j.destroy("cateid"),i.path("search").search({q:n.srch.name})},this.searchPs=function(){var a=g.searchProduct,b=new a;b.$get({name:d.q,limit:9},function(a){"success"==a.status?(n.products=a.response.product,n.length=a.response.product_count,n.search=d.q):n.error=a})},this.pageSearch=function(a){n.pageLoading=!0;var b=g.searchProduct,c=new b;c.$get({name:j.get("q"),lprice:j.get("lprice"),hprice:j.get("hprice"),limit:9,start:a},function(a){"success"==a.status?(n.pageLoading=!1,n.products=n.products.concat(a.response.product),n.search=d.q):n.error=a})},this.pageCateSearch=function(a){n.pageLoading=!0;var b=new e.cateProduct;b.$get({category:j.get("cateid"),lprice:j.get("lprice"),hprice:j.get("hprice"),limit:9,start:a},function(a){"success"==a.status&&(n.pageLoading=!1,n.products.concat=a.response.product,n.cate=a.response.category,n.search=n.cate.name)},function(a){"401"==a.status&&j.get("token")})},this.getCategory=function(){var a=f.getCategory,b=new a;b.$get(function(a){"success"==a.status&&(n.category=a.response.categories)},function(a){"401"==a.status&&j.get("token")})},this.categorySearch=function(){j.destroy("q"),j.destroy("lprice"),j.destroy("hprice");var a=new e.cateProduct;a.$get({category:d.cid,limit:9},function(a){"success"==a.status&&(n.products=a.response.product,n.cate=a.response.category,n.length=a.response.product_count,n.search=n.cate.name,j.set("cateid",n.search))},function(a){"401"==a.status&&j.get("token")})},this.priceSearch=function(){j.set("lprice",$("#minp").val()),j.set("hprice",$("#maxp").val());var a=g.searchPriceProduct,b=new a;b.$get({name:d.q,category:d.id,lprice:$("#minp").val(),hprice:$("#maxp").val(),limit:9},function(a){"success"==a.status?(n.products=a.response.product,n.length=a.response.product_count,j.get("q")&&(n.qs=j.get("q"),n.search=n.qs+", $"+$("#minp").val()+" -  $"+$("#maxp").val()),j.get("cateid")&&(n.qs=j.get("cateid"),n.search=n.qs+" , $"+$("#minp").val()+" -  $"+$("#maxp").val())):n.error=a})},this.venderAll=function(){var a=new e.shopList;a.$get(function(a){"success"==a.status&&(n.group=a.response)},function(a){"401"==a.status&&j.get("token")})},n.colourIncludes=[],this.includeColour=function(a){var b=$.inArray(a,n.colourIncludes);b>-1?n.colourIncludes.splice(b,1):n.colourIncludes.push(a)},this.colourFilter=function(a){return n.colourIncludes.length>0&&$.inArray(a.seller_name,n.colourIncludes)<0?void 0:a},void 0!=d.cid&&(this.venderAll(),this.categorySearch(),this.getCategory()),void 0!=d.q&&(this.venderAll(),this.searchPs(),this.getCategory());var x=function(a,b){this.options=b,this.$element=$(a);var c=this;this.dropdowns=this.$element.hasClass("dropdown-toggle")?this.$element.parent().find(".dropdown-menu").parent(".dropdown"):this.$element.find(".dropdown"),this.dropdowns.each(function(){$(this).on("mouseenter.bs.dropdownhover",function(a){c.show($(this).children("a, button"))})}),this.dropdowns.each(function(){$(this).on("mouseleave.bs.dropdownhover",function(a){c.hide($(this).children("a, button"))})})};x.TRANSITION_DURATION=300,x.DELAY=150,x.TIMEOUT,x.DEFAULTS={animations:["fadeInDown","fadeInRight","fadeInUp","fadeInLeft"]},x.prototype.show=function(a){var b=$(a);window.clearTimeout(x.TIMEOUT),$(".dropdown").not(b.parents()).each(function(){$(this).removeClass("open")});var c=this.options.animations[0];if(!b.is(".disabled, :disabled")){var d=b.parent(),e=d.hasClass("open");if(!e){var f=b.next(".dropdown-menu");d.addClass("open");var g=this.position(f);c="top"==g?this.options.animations[2]:"right"==g?this.options.animations[3]:"left"==g?this.options.animations[1]:this.options.animations[0],f.addClass("animated "+c);var h=$.support.transition&&f.hasClass("animated");h?f.one("bsTransitionEnd",function(){f.removeClass("animated "+c)}).emulateTransitionEnd(x.TRANSITION_DURATION):f.removeClass("animated "+c)}return!1}},x.prototype.hide=function(a){var b=$(a),c=b.parent();x.TIMEOUT=window.setTimeout(function(){c.removeClass("open")},x.DELAY)},x.prototype.position=function(a){var b=$(window);a.css({bottom:"",left:"",top:"",right:""}).removeClass("dropdownhover-top");var c={top:b.scrollTop(),left:b.scrollLeft()};c.right=c.left+b.width(),c.bottom=c.top+b.height();var d=a.offset();d.right=d.left+a.outerWidth(),d.bottom=d.top+a.outerHeight();var e=a.position();e.right=d.left+a.outerWidth(),e.bottom=d.top+a.outerHeight();var f="",g=a.parents(".dropdown-menu").length;if(g)e.left<0?(f="left",a.removeClass("dropdownhover-right").addClass("dropdownhover-left")):(f="right",a.addClass("dropdownhover-right").removeClass("dropdownhover-left")),d.left<c.left?(f="right",a.css({left:"100%",right:"auto"}).addClass("dropdownhover-right").removeClass("dropdownhover-left")):d.right>c.right&&(f="left",a.css({left:"auto",right:"100%"}).removeClass("dropdownhover-right").addClass("dropdownhover-left")),d.bottom>c.bottom?a.css({bottom:"auto",top:-(d.bottom-c.bottom)}):d.top<c.top&&a.css({bottom:-(c.top-d.top),top:"auto"});else{var h=a.parent(".dropdown"),i=h.offset();i.right=i.left+h.outerWidth(),i.bottom=i.top+h.outerHeight(),d.right>c.right&&a.css({left:-(d.right-c.right),right:"auto"}),d.bottom>c.bottom&&i.top-c.top>c.bottom-i.bottom||a.position().top<0?(f="top",a.css({bottom:"100%",top:"auto"}).addClass("dropdownhover-top").removeClass("dropdownhover-bottom")):(f="bottom",a.addClass("dropdownhover-bottom"))}return f};var y=$.fn.dropdownhover;$.fn.dropdownhover=m,$.fn.dropdownhover.Constructor=x,$.fn.dropdownhover.noConflict=function(){return $.fn.dropdownhover=y,this};var z;$(document).ready(function(){$(window).width()>=768&&$('[data-hover="dropdown"]').each(function(){var a=$(this);m.call(a,a.data())})}),$(window).on("resize",function(){clearTimeout(z),z=setTimeout(function(){$(window).width()>=768?$('[data-hover="dropdown"]').each(function(){var a=$(this);m.call(a,a.data())}):$('[data-hover="dropdown"]').each(function(){$(this).removeData("bs.dropdownhover"),$(this).hasClass("dropdown-toggle")?$(this).parent(".dropdown").find(".dropdown").andSelf().off("mouseenter.bs.dropdownhover mouseleave.bs.dropdownhover"):$(this).find(".dropdown").off("mouseenter.bs.dropdownhover mouseleave.bs.dropdownhover")})},200)}),k.$on("ngRepeatImagePreview",function(a){for(var b=document.getElementsByTagName("img"),c=0;c<b.length;c++)b[c].getAttribute("title")&&b[c].setAttribute("src",b[c].getAttribute("title"))}),k.$on("ngRepeatFinisheds",function(a){$("#slider-range").slider({range:!0,min:0,max:1e4,values:[0,1e3],slide:function(a,b){$("#amount").val("$"+b.values[0]+" - $"+b.values[1]),$("#minp").val(b.values[0]),$("#maxp").val(b.values[1])}}),$("#amount").val("$"+$("#slider-range").slider("values",0)+" - $"+$("#slider-range").slider("values",1)),$("#minp").val($("#slider-range").slider("values",0)),$("#maxp").val($("#slider-range").slider("values",1))})}]).filter("cut",function(){return function(a,b,c,d){if(!a)return"";if(c=parseInt(c,10),!c)return a;if(a.length<=c)return a;if(a=a.substr(0,c),b){var e=a.lastIndexOf(" ");-1!=e&&(("."==a.charAt(e-1)||","==a.charAt(e-1))&&(e-=1),a=a.substr(0,e))}return a+(d||" â€¦")}}),angular.module("eCommerceUserApp").controller("LoginCtrl",["$http","$routeParams","UserAuth","ConfirmUser","sessionService","$location","$scope",function(a,b,c,d,e,f,g){var h=this;h.login={email:e.get("remail"),password:e.get("rpass")},h.success=angular.fromJson(e.get("success")),e.destroy("success"),this.close=function(){h.error="",h.success=""},this.loginAsUser=function(){h.dataLoading=!0;var b=new c(h.login);b.$login({guest_token:e.get("token")}).then(function(b){"success"==b.status?(e.set("user",JSON.stringify(b.response.user)),e.set("user_token",angular.fromJson(e.get("user")).token),a.defaults.headers.common.Authorization=e.get("user_token"),f.path("/")):(h.dataLoading=!1,h.error=b)})},this.confirmAsUser=function(){var a=new d.confirmCheck(b.id);a.$get(function(a){"success"==a.status?h.success=a:h.error=a},function(a){"401"==a.status&&e.get("token")})},this.logout=function(){e.destroy("token"),e.destroy("user"),e.destroy("user_token"),f.path("#/login")},void 0!=b.id&&this.confirmAsUser()}]),angular.module("eCommerceUserApp").controller("MainCtrl",["Product","Category","search","Main","Cart","$location","sessionService","$scope","$sce",function(a,b,c,d,e,f,g,h,i){var j=this,k=d.getHomepage,l=new k;l.$get(function(a){"success"==a.status&&(j.home=a.response)},function(a){"401"==a.status&&g.get("token")});var m=new a.shopList;m.$get(function(a){"success"==a.status&&(j.shops=a.response)},function(a){"401"==a.status&&g.get("token")});var n=new a.getAllProducts;n.$get({limit:9},function(a){"success"==a.status&&(h.allp=a.response)},function(a){"401"==a.status&&g.get("token")}),j.limit=9,g.set("lastlenght",0),this.expand=function(a){j.limit+=a},this.myPagingFunction=function(b){if(h.allp.product_count!=b&&b!=g.get("lastlenght")){g.set("lastlenght",b),h.header.pageLoading=!0;var c=new a.getAllProducts;c.$get({limit:9,start:b},function(a){"success"==a.status&&(h.allp.product=h.allp.product.concat(a.response.product),h.header.pageLoading=!1)},function(a){"401"==a.status&&g.get("token")})}},h.getIframeSrc=function(a){return console.log(a),i.trustAsResourceUrl(a+"?rel=0&amp;controls=0&amp;showinfo=0?rel=0&autoplay=1")};var o=a.getBestOffer,p=new o;p.$get(function(a){if("success"==a.status){j.bestO=a.response.product;for(var b=0;b<j.bestO.length;b++){var c=j.bestO[b];j.bestO[b].totalOffer=(c.pricing.original-c.pricing.after_discount)/c.pricing.original*100}j.best_offer=j.bestO}},function(a){"401"==a.status&&g.get("token")}),$.stickysidebarscroll("#stores",{offset:{top:90,bottom:200}}),$.stickysidebarscroll("#trending",{offset:{top:90,bottom:200}}),$('[data-toggle="tooltip"]').tooltip()}]),angular.module("eCommerceUserApp").controller("OrderCtrl",["$routeParams","Order","Checkout","$location","sessionService","endpoint","$scope",function(a,b,c,d,e,f,g){var h=this;h.download_url=f;var i=b.getOrder,j=new i;j.$get({guest_token:e.get("token")},function(a){"success"==a.status&&(h.orders=a.response)},function(a){"401"==a.status&&e.get("token")})}]),angular.module("eCommerceUserApp").controller("PaymentCtrl",["$routeParams","dpath","Product","Payment","Cart","Checkout","$location","sessionService","endpoint","$scope","stripe",function(a,b,c,d,e,f,g,h,i,j,k){var l=this;h.get("coupon")&&(l.discount={},l.discount.amount=h.get("coupon_amount"),l.csuccess=h.get("coupon")),this.payment=function(){var b=d.saveOrder,c=new b;c.$get({guest_token:h.get("token"),payid:a.tx,status:a.st},function(a){"success"==a.status&&(l.success=a,g.path("order"))},function(a){"401"==a.status&&h.get("token")})}}]),angular.module("eCommerceUserApp").controller("ProductCtrl",["$routeParams","Product","Category","Cart","$location","sessionService","$scope","$sce",function(a,b,c,d,e,f,g,h){var i=this;this.close=function(){i.error="",i.success=""},this.range=function(a,b,c){c=c||1;for(var d=[],e=a;b>=e;e+=c)d.push(e);return d},this.productDetails=function(){var c=new b.detailsProduct({id:a.pid});c.$get(function(a){if("success"==a.status){i.product=a.response.product[0];var c=new b.cateProduct({category:i.product.categories[0]._id});c.$get(function(a){"success"==a.status&&(i.related=a.response.product)},function(a){"401"==a.status&&f.get("token")});var d=b.getTopProducts,e=new d;e.$get({seller:i.product.seller_id},function(a){"success"==a.status&&(i.shopproduct=a.response)},function(a){"401"==a.status&&f.get("token")})}},function(a){"401"==a.status&&f.get("token")})},this.reviewDetails=function(){var c=new b.reviewDetails({id:a.pid});c.$get(function(a){"success"==a.status&&(i.rating=a.response.rating)},function(a){"401"==a.status&&f.get("token")})},this.addToCart=function(){g.header.pageLoading=!0;var c=new b.AddtoCart({product_id:a.pid,quantity:i.cart.quantity,product_variant:i.cart.product_variant,product_license:i.cart.product_license});c.$get({guest_token:f.get("token")},function(a){if("success"==a.status){i.successs=a;var b=new d.getCart;b.$get({guest_token:f.get("token")},function(a){"success"==a.status&&(i.carts=a.response.cart,g.header.carts=a.response.cart,g.header.pageLoading=!1,i.success=i.successs)})}"fail"==a.status&&(g.header.pageLoading=!1,i.error=a)},function(a){"401"==a.status&&f.get("token")})};var j=d.getCart,k=new j;k.$get({guest_token:f.get("token")},function(a){if("success"==a.status){i.carts=a.response.cart,g.carts=a.response.cart;var b=0,c=0;i.carts.forEach(function(a){b+=a.selected_pricing.after_discount*a.product_quantity,c+=1==a.product_id.paid_by_buyer?a.product_id.shipping_details.fee:0}),i.totalprice=b,i.shipprice=c,i.overprice=c+b,i.pageLoading=!1}else i.carts=[],g.carts=[],i.pageLoading=!1,"Unauthorized"==a.statusMessage&&(f.destroy("token"),
f.destroy("user"),f.destroy("user_token"),e.path("#/login"))},function(a){"401"==a.status&&f.get("token")}),this.buyNow=function(){var c=new b.AddtoCart({product_id:a.pid,quantity:i.cart.quantity,product_variant:i.cart.product_variant});c.$get({guest_token:f.get("token")},function(a){if("success"==a.status){i.success=a;var b=new d.getCart;b.$get({guest_token:f.get("token")},function(a){if("success"==a.status){g.header.carts=a.response;var b=0;a.response.forEach(function(a){b+=a.product_id.pricing.after_discount*a.product_quantity}),g.header.totalprice=b,e.path("checkout")}})}"fail"==a.status&&(i.error=a,e.path("checkout"))},function(a){"401"==a.status&&f.get("token")})},void 0!=a.pid&&(this.productDetails(),this.reviewDetails()),g.$on("ngSliderFinsh",function(a){$.fn.pgwSlideshow=function(a){var b={mainClassName:"pgwSlideshow",transitionEffect:"sliding",displayList:!0,displayControls:!0,touchControls:!0,autoSlide:!1,beforeSlide:!1,afterSlide:!1,maxHeight:null,adaptiveDuration:200,transitionDuration:500,intervalDuration:3e3};if(0==this.length)return this;if(this.length>1)return this.each(function(){$(this).pgwSlideshow(a)}),this;var c=this;c.plugin=this,c.config={},c.data=[],c.currentSlide=0,c.slideCount=0,c.resizeEvent=null,c.intervalEvent=null,c.touchFirstPosition=null,c.touchListLastPosition=!1,c.window=$(window);var d=function(){return c.config=$.extend({},b,a),h(),c.config.displayList&&o(),c.window.resize(function(){clearTimeout(c.resizeEvent),c.resizeEvent=setTimeout(function(){g();var a=c.plugin.find(".ps-current > ul > li.elt_"+c.currentSlide+" img").height();e(a),c.config.displayList&&(o(),p())},100)}),c.config.autoSlide&&n(),!0},e=function(a,b){return c.config.maxHeight&&a+c.plugin.find(".ps-list").height()>c.config.maxHeight&&(a=c.config.maxHeight-c.plugin.find(".ps-list").height()),"function"==typeof c.plugin.find(".ps-current").animate?c.plugin.find(".ps-current").stop().animate({height:a},c.config.adaptiveDuration,function(){c.config.maxHeight&&c.plugin.find(".ps-current > ul > li img").css("max-height",a+"px")}):(c.plugin.find(".ps-current").css("height",a),c.config.maxHeight&&c.plugin.find(".ps-current > ul > li img").css("max-height",a+"px")),!0},f=function(){var a=0;return c.plugin.show(),c.plugin.find(".ps-list > ul > li").show().each(function(){a+=$(this).width()}),c.plugin.find(".ps-list > ul").width(a),!0},g=function(){return c.plugin.width()<=480?c.plugin.addClass("narrow").removeClass("wide"):c.plugin.addClass("wide").removeClass("narrow"),!0},h=function(){if(c.plugin.removeClass("pgwSlideshow").removeClass(c.config.mainClassName),c.plugin.wrap('<div class="ps-list"></div>'),c.plugin=c.plugin.parent(),c.plugin.wrap('<div class="'+c.config.mainClassName+'"></div>'),c.plugin=c.plugin.parent(),c.plugin.prepend('<div class="ps-current"><ul></ul><span class="ps-caption"></span></div>'),c.slideCount=c.plugin.find(".ps-list > ul > li").length,0==c.slideCount)throw new Error("pgwSlideshow - No slider item has been found");c.slideCount>1&&(c.config.displayControls&&(c.plugin.find(".ps-current").prepend('<span class="ps-prev"><span class="ps-prevIcon"></span></span>'),c.plugin.find(".ps-current").append('<span class="ps-next"><span class="ps-nextIcon"></span></span>'),c.plugin.find(".ps-current .ps-prev").click(function(){c.previousSlide()}),c.plugin.find(".ps-current .ps-next").click(function(){c.nextSlide()})),c.config.touchControls&&(c.plugin.find(".ps-current").on("touchstart",function(a){try{a.originalEvent.touches[0].clientX&&null==c.touchFirstPosition&&(c.touchFirstPosition=a.originalEvent.touches[0].clientX)}catch(a){c.touchFirstPosition=null}}),c.plugin.find(".ps-current").on("touchmove",function(a){try{a.originalEvent.touches[0].clientX&&null!=c.touchFirstPosition&&(a.originalEvent.touches[0].clientX>c.touchFirstPosition+50?(c.touchFirstPosition=null,c.previousSlide()):a.originalEvent.touches[0].clientX<c.touchFirstPosition-50&&(c.touchFirstPosition=null,c.nextSlide()))}catch(a){c.touchFirstPosition=null}}),c.plugin.find(".ps-current").on("touchend",function(a){c.touchFirstPosition=null})));var a=1;return c.plugin.find(".ps-list > ul > li").each(function(){var b=i($(this));b.id=a,c.data.push(b),$(this).addClass("elt_"+b.id),$(this).wrapInner('<span class="ps-item'+(1==a?" ps-selected":"")+'"></span>');var d=$('<li class="elt_'+a+'"></li>');b.image?d.html('<img src="'+b.image+'" alt="'+(b.title?b.title:"")+'">'):b.thumbnail&&d.html('<img src="'+b.thumbnail+'" alt="'+(b.title?b.title:"")+'">'),b.link&&d.html('<a href="'+b.link+'"'+(b.linkTarget?' target="'+b.linkTarget+'"':"")+">"+d.html()+"</a>"),c.plugin.find(".ps-current > ul").append(d),$(this).css("cursor","pointer").click(function(a){a.preventDefault(),m(b.id)}),a++}),c.config.displayList?(f(),c.plugin.find(".ps-list").prepend('<span class="ps-prev"><span class="ps-prevIcon"></span></span>'),c.plugin.find(".ps-list").append('<span class="ps-next"><span class="ps-nextIcon"></span></span>'),c.plugin.find(".ps-list").show()):c.plugin.find(".ps-list").hide(),c.config.autoSlide&&c.plugin.on("mouseenter",function(){clearInterval(c.intervalEvent),c.intervalEvent=null}).on("mouseleave",function(){n()}),c.plugin.find(".ps-current > ul > li").hide(),m(1),c.plugin.find(".ps-current > ul > li.elt_1 img").on("load",function(){g();var a=c.plugin.find(".ps-current > ul > li.elt_1 img").height();e(a)}),g(),c.plugin.show(),!0},i=function(a){var b={},c=a.find("a").attr("href");if("undefined"!=typeof c&&""!=c){b.link=c;var d=a.find("a").attr("target");"undefined"!=typeof d&&""!=d&&(b.linkTarget=d)}var e=a.find("img").attr("src");"undefined"!=typeof e&&""!=e&&(b.thumbnail=e);var f=a.find("img").attr("data-large-src");"undefined"!=typeof f&&""!=f&&(b.image=f);var g=a.find("img").attr("alt");"undefined"!=typeof g&&""!=g&&(b.title=g);var h=a.find("img").attr("data-description");return"undefined"!=typeof h&&""!=h&&(b.description=h),b},j=function(a){var b="";a.title&&(b+="<b>"+a.title+"</b>"),a.description&&(""!=b&&(b+="<br>"),b+=a.description),""!=b&&(a.link&&(b='<a href="'+a.link+'"'+(a.linkTarget?' target="'+a.linkTarget+'"':"")+">"+b+"</a>"),"function"==typeof c.plugin.find(".ps-caption").fadeIn?(c.plugin.find(".ps-caption").html(b),c.plugin.find(".ps-caption").fadeIn(c.config.transitionDuration/2)):(c.plugin.find(".ps-caption").html(b),c.plugin.find(".ps-caption").show())),c.plugin.find(".ps-list > ul > li .ps-item").removeClass("ps-selected"),c.plugin.find(".ps-list > ul > li.elt_"+a.id+" .ps-item").addClass("ps-selected"),c.config.displayList&&(o(),p()),c.config.displayControls&&("function"==typeof c.plugin.find(".ps-current > .ps-prev").fadeIn?c.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").fadeIn(c.config.transitionDuration/2):c.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").show()),"function"==typeof c.config.afterSlide&&c.config.afterSlide(a.id);var d=c.plugin.find(".ps-current .elt_"+a.id+" img").height();return e(d,!0),!0},k=function(a){var b=c.plugin.find(".ps-current > ul");if(b.find("li").not(".elt_"+c.currentSlide).not(".elt_"+a.id).each(function(){"function"==typeof $(this).stop&&$(this).stop(),$(this).css("position","").css("z-index",1).hide()}),c.currentSlide>0){var d=b.find(".elt_"+c.currentSlide);"function"!=typeof d.animate&&(d.animate=function(a,b,c){d.css(a),c&&c()}),"function"==typeof d.stop&&d.stop(),d.css("position","absolute").animate({opacity:0},c.config.transitionDuration,function(){d.css("position","").css("z-index",1).hide()})}c.currentSlide=a.id;var e=b.find(".elt_"+a.id);return"function"!=typeof e.animate&&(e.animate=function(a,b,c){e.css(a),c&&c()}),"function"==typeof e.stop&&e.stop(),e.css("position","absolute").show().animate({opacity:1},c.config.transitionDuration,function(){e.css("position","").css("z-index",2).css("display","block"),j(a)}),!0},l=function(a,b){var d=c.plugin.find(".ps-current > ul");if("undefined"==typeof b&&(b="left"),0==c.currentSlide)d.find(".elt_1").css({position:"",left:"",opacity:1,"z-index":2}).show(),c.plugin.find(".ps-list > li.elt_1").css("opacity","1"),j(a);else{if(c.transitionInProgress)return!1;c.transitionInProgress=!0;var e=d.width();if("left"==b)var f=-e,g=e;else var f=e,g=-e;var h=d.find(".elt_"+c.currentSlide);"function"!=typeof h.animate&&(h.animate=function(a,b,c){h.css(a),c&&c()}),h.css("position","absolute").animate({left:f},c.config.transitionDuration,function(){h.css("position","").css("z-index",1).css("left","").css("opacity",0).hide()});var i=d.find(".elt_"+a.id);"function"!=typeof i.animate&&(i.animate=function(a,b,c){i.css(a),c&&c()}),i.css("position","absolute").css("left",g).css("opacity",1).show().animate({left:0},c.config.transitionDuration,function(){i.css("position","").css("left","").css("z-index",2).show(),c.transitionInProgress=!1,j(a)})}return c.currentSlide=a.id,!0},m=function(a,b,d){if(a==c.currentSlide)return!1;var e=c.data[a-1];if("undefined"==typeof e)throw new Error("pgwSlideshow - The element "+a+" is undefined");return"undefined"==typeof d&&(d="left"),"function"==typeof c.config.beforeSlide&&c.config.beforeSlide(a),"function"==typeof c.plugin.find(".ps-caption").fadeOut?c.plugin.find(".ps-caption, .ps-prev, .ps-next").fadeOut(c.config.transitionDuration/2):c.plugin.find(".ps-caption, .ps-prev, .ps-next").hide(),"sliding"==c.config.transitionEffect?l(e,d):k(e),"undefined"!=typeof b&&c.config.autoSlide&&n(),!0},n=function(){return clearInterval(c.intervalEvent),c.slideCount>1&&c.config.autoSlide&&(c.intervalEvent=setInterval(function(){if(c.currentSlide+1<=c.slideCount)var a=c.currentSlide+1;else var a=1;m(a)},c.config.intervalDuration)),!0},o=function(){if(!c.config.displayList)return!1;f();var a=c.plugin.find(".ps-list"),b=a.width(),d=c.plugin.find(".ps-list > ul"),e=d.width();if(e>b){d.css("margin","0 45px");var g=parseInt(d.css("margin-left")),h=parseInt(d.css("margin-right"));b-=g+h,a.find(".ps-prev").show().unbind("click").click(function(){var a=parseInt(d.css("left")),f=a+b;0==a?f=-(e-b):f>0&&(f=0),"function"==typeof d.animate?d.animate({left:f},c.config.transitionDuration):d.css("left",f)}),a.find(".ps-next").show().unbind("click").click(function(){var a=parseInt(d.css("left")),f=a-b,g=-(e-b);a==g?f=0:g>f&&(f=g),"function"==typeof d.animate?d.animate({left:f},c.config.transitionDuration):d.css("left",f)}),c.config.touchControls&&(c.plugin.find(".ps-list > ul").on("touchmove",function(b){try{if(b.originalEvent.touches[0].clientX){var e=0==c.touchListLastPosition?0:c.touchListLastPosition;nbPixels=0==c.touchListLastPosition?1:Math.abs(e-b.originalEvent.touches[0].clientX),c.touchListLastPosition=b.originalEvent.touches[0].clientX;var f="";e>b.originalEvent.touches[0].clientX?f="left":e<b.originalEvent.touches[0].clientX&&(f="right")}var g=parseInt(d.css("left"));if("left"==f){var h=a.width(),i=d.width(),j=parseInt(d.css("margin-left")),k=parseInt(d.css("margin-right"));h-=j+k;var l=-(i-h),m=g-nbPixels;m>l&&d.css("left",m)}else if("right"==f){var m=g+nbPixels;0>m?d.css("left",m):d.css("left",0)}}catch(b){c.touchListLastPosition=!1}}),c.plugin.find(".ps-list > ul").on("touchend",function(a){c.touchListLastPosition=!1}))}else{var g=parseInt((b-e)/2);d.css("left",0).css("margin-left",g),a.find(".ps-prev").hide(),a.find(".ps-next").hide(),c.plugin.find(".ps-list > ul").unbind("touchstart touchmove touchend")}return!0},p=function(){var a=c.plugin.find(".ps-list").width(),b=c.plugin.find(".ps-list > ul"),d=b.width(),e=parseInt(b.css("margin-left")),f=parseInt(b.css("margin-right"));a-=e+f;var g=Math.abs(parseInt(b.css("left"))),h=g+a,i=c.plugin.find(".ps-list .ps-selected").position().left,j=i+c.plugin.find(".ps-list .ps-selected").width();if(g>i||j>h||d>a&&h>j){var k=-(d-a);k>-i?b.css("left",k):b.css("left",-i)}return!0};return c.startSlide=function(){return c.config.autoSlide=!0,n(),!0},c.stopSlide=function(){return c.config.autoSlide=!1,clearInterval(c.intervalEvent),!0},c.getCurrentSlide=function(){return c.currentSlide},c.getSlideCount=function(){return c.slideCount},c.displaySlide=function(a){return m(a,!0),!0},c.nextSlide=function(){if(c.currentSlide+1<=c.slideCount)var a=c.currentSlide+1;else var a=1;return m(a,!0,"left"),!0},c.previousSlide=function(){if(c.currentSlide-1>=1)var a=c.currentSlide-1;else var a=c.slideCount;return m(a,!0,"right"),!0},c.destroy=function(a){return clearInterval(c.intervalEvent),"undefined"!=typeof a?(c.plugin.find(".ps-list > ul > li").each(function(){$(this).attr("style",null).removeClass().unbind("click"),$(this).html($(this).find("span").html())}),c.plugin.find(".ps-current").remove(),c.plugin.find(".ps-list").find(".ps-prev, .ps-next").remove(),c.plugin.find(".ps-list > ul").addClass(c.config.mainClassName).attr("style",""),c.plugin.find(".ps-list > ul").unwrap().unwrap(),c.hide()):c.parent().parent().remove(),c.plugin=null,c.data=[],c.config={},c.currentSlide=0,c.slideCount=0,c.resizeEvent=null,c.intervalEvent=null,c.touchFirstPosition=null,c.window=null,!0},c.reload=function(a){return c.destroy(!0),c=this,c.plugin=this,c.window=$(window),c.plugin.show(),c.config=$.extend({},b,a),h(),c.window.resize(function(){clearTimeout(c.resizeEvent),c.resizeEvent=setTimeout(function(){g();var a=c.plugin.find(".ps-current > ul > li.elt_"+c.currentSlide+" img").css("max-height","").height();e(a),c.config.displayList&&(o(),p())},100)}),c.config.autoSlide&&n(),!0},d(),this},$(".pgwSlideshow").pgwSlideshow()}),g.getIframeSrc=function(a){return h.trustAsResourceUrl(a)}}]),angular.module("eCommerceUserApp").controller("RegisterCtrl",["Register","Main","sessionService","$location","$scope",function(a,b,c,d,e){var f=this;this.close=function(){f.error="",f.success=""};var g=b.getCountry,h=new g;h.$get(function(a){f.country=a.response}),this.registerAsUser=function(){f.dataLoading=!0;var b=new a(f.register);b.$register().then(function(a){"success"==a.status?(f.dataLoading=!1,f.success=a,c.set("success",JSON.stringify(a)),d.path("#/login")):(f.dataLoading=!1,f.error=a)})}}]),angular.module("eCommerceUserApp").controller("ReturnCtrl",["$routeParams","Product","Category","Cart","$location","sessionService","$scope",function(a,b,c,d,e,f,g){var h=this;this.close=function(){h.error="",h.success=""};var i=new b.detailsReturnProduct({id:a.pid,oid:a.oid});i.$get(function(a){"success"==a.status&&(h.product=a.response.product)},function(a){"401"==a.status&&f.get("token")}),this.addToReturn=function(){var c=new b.addReturn(h["return"]);c.$get({id:a.pid,oid:a.oid},function(a){"success"==a.status?h.success=a:h.error=a},function(a){"401"==a.status&&f.get("token")})}}]),angular.module("eCommerceUserApp").controller("ReviewCtrl",["$routeParams","Product","Payment","Cart","Checkout","$location","sessionService","endpoint","$scope","stripe",function(a,b,c,d,e,f,g,h,i,j){var k=this;this.close=function(){k.error="",k.success=""},k.re={},i.isReadonly=!1,i.changeOnHover=!1,i.maxValue=5,i.ratingValue=0,k.re.stars=i.ratingValue;var l=new b.checkReview({id:a.pid,oid:a.oid});l.$get(function(a){null==a.response.rating?k.review="active":(i.ratingValue=a.response.rating.stars,k.re.stars=i.ratingValue,k.re=a.response.rating)},function(a){"401"==a.status&&g.get("token")}),this.saveReview=function(){k.re.stars=parseInt($("#stars").val());var c=new b.saveReview(k.re);c.$get({id:a.pid,oid:a.oid},function(b){f.path("product/"+a.pid)})}}]),angular.module("eCommerceUserApp").controller("ShopCtrl",["$routeParams","Product","Category","Cart","$location","sessionService","$scope",function(a,b,c,d,e,f,g){var h=this;if(this.close=function(){h.error="",h.success=""},h.limit=9,this.expand=function(a){h.limit+=a},this.shopDetails=function(){var c=new b.shopProducts;c.$get({seller:a.sid,limit:9},function(a){"success"==a.status&&(h.sellerp=a.response.product,h.seller=a.response.seller,h.length=a.response.product_count)},function(a){"401"==a.status&&f.get("token")})},this.shopDetailsPage=function(c){var d=new b.shopProducts;d.$get({seller:a.sid,limit:c+9,start:c},function(a){"success"==a.status&&(h.sellerp=h.sellerp.concat(a.response.product))},function(a){"401"==a.status&&f.get("token")})},void 0!=a.sid)this.shopDetails();else{var i=new b.shopList;i.$get(function(a){"success"==a.status&&(h.shops=a.response)},function(a){"401"==a.status&&f.get("token")})}}]),angular.module("eCommerceUserApp").controller("SuccessCtrl",["$routeParams","Product","Payment","Cart","Checkout","$location","sessionService","endpoint","$scope","stripe",function(a,b,c,d,e,f,g,h,i,j){var k=this;if("Stripe"==g.get("payment"))g.destroy("payment"),g.destroy("coupon"),g.destroy("coupon_amount"),k.success=!0,k.error=!1;else if("Paypal"==g.get("payment")){var l=c.saveOrder,m=new l({guest_token:g.get("token"),payment_id:a.tx,payment_status:a.st,payment_method:"paypal",coupon:g.get("coupon"),shipping:g.get("ship_address"),billing:g.get("ship_address")});m.$get(function(a){"success"==a.status&&(g.destroy("payment"),g.destroy("coupon"),g.destroy("coupon_amount"),k.success=a,k.error=!1)},function(a){"401"==a.status&&g.get("token")})}else"yes"==g.get("payment_error")?(g.destroy("payment_error"),k.error=!0):f.path("order");var n=b.getAdmin,o=new n;o.$get({guest_token:g.get("token")},function(a){"success"==a.status&&(i.admin=a.response)},function(a){"401"==a.status&&g.get("token")})}]),angular.module("eCommerceUserApp").directive("ngTranslateLanguageSelect",function(a){return{restrict:"A",replace:!0,template:'<div class="language-select" ng-if="visible"><label>{{"directives.language-select.Language" | translate}}:<select  class="language-select" ng-model="currentLocaleDisplayName"ng-options="localesDisplayName for localesDisplayName in localesDisplayNames"ng-change="changeLanguage(currentLocaleDisplayName)"></select></label></div>',controller:function(b){b.currentLocaleDisplayName=a.getLocaleDisplayName(),b.localesDisplayNames=a.getLocalesDisplayNames(),b.visible=b.localesDisplayNames&&b.localesDisplayNames.length>1,b.changeLanguage=function(b){a.setLocaleByDisplayName(b)}}}}),angular.module("eCommerceUserApp").directive("angularStarRating",angularStarRating),angular.module("eCommerceUserApp").directive("footerBar",function(){return{templateUrl:"partials/footerbar.html",restrict:"E"}}),angular.module("eCommerceUserApp").directive("headerBar",function(){return{templateUrl:"partials/headerbar.html",controller:"HeaderCtrl",controllerAs:"header",restrict:"E"}}),angular.module("eCommerceUserApp").directive("loginheaderBar",function(){return{templateUrl:"partials/loginheaderbar.html",restrict:"E"}}),angular.module("eCommerceUserApp").directive("logout",function(){return{template:'<li><a class="logout"  ng-click="LC.logout()">Logout</a></li>',restrict:"E",controller:"LoginCtrl",controllerAs:"LC",restrict:"E"}}),angular.module("eCommerceUserApp").directive("onFinishRender",function(a){return{restrict:"A",link:function(b,c,d){b.$last===!0&&a(function(){b.$emit(d.onFinishRender)})}}}),angular.module("eCommerceUserApp").directive("partials",function(){return{template:"<div></div>",restrict:"E",link:function(a,b,c){b.text("this is the partials directive")}}}),angular.module("eCommerceUserApp").directive("ulogout",function(){return{template:'<a class="kp-button floatright" style="cursor:pointer;" ng-click="LC.logout()">Logout</a>',controller:"LoginCtrl",controllerAs:"LC",restrict:"E"}}),angular.module("eCommerceUserApp").service("LocaleService",function(a,b,c,d){function e(){m.addClass(n)}function f(){m.removeClass(n)}var g=b.locales,h=Object.keys(g);h&&0!==h.length||console.error("There are no _LOCALES provided");var i=[];h.forEach(function(a){i.push(g[a])});var j=a.proposedLanguage(),k=function(a){return-1!==h.indexOf(a)},l=function(b){return k(b)?(e(),j=b,void a.use(b)):void console.error('Locale name "'+b+'" is invalid')},m=angular.element("html"),n="app-loading";return c.$on("$translateChangeSuccess",function(a,b){document.documentElement.setAttribute("lang",b.language),d.set(b.language.toLowerCase().replace(/_/g,"-"))}),c.$on("$localeChangeSuccess",function(){f()}),{getLocaleDisplayName:function(){return g[j]},setLocaleByDisplayName:function(a){l(h[i.indexOf(a)])},getLocalesDisplayNames:function(){return i}}}),angular.module("eCommerceUserApp").factory("Account",["$routeParams","$resource","endpoint","sessionService",function(a,b,c,d){return{getDetails:b(c+"/users/account/get-details",null,{get:{method:"GET"}}),getSingleAddress:b(c+"/users/account/get-address/:id",{id:"@id"},{get:{method:"GET"}}),saveDetails:b(c+"/users/account/update",null,{get:{method:"PUT"}}),putAddress:b(c+"/users/account/update-address/:id",{id:"@_id"},{get:{method:"PUT"}}),deleteAddress:b(c+"/users/account/remove-address/:id",{id:"@id"},{get:{method:"DELETE"}}),updatePassword:b(c+"/users/account/change-password",null,{get:{method:"POST"}})}}]),angular.module("eCommerceUserApp").factory("sessionService",["$cookieStore",function(a){return{set:function(b,c){return a.put(b,c)},get:function(b){return a.get(b)},destroy:function(b){return a.remove(b)}}}]),angular.module("eCommerceUserApp").factory("Cart",["$routeParams","$resource","endpoint","sessionService","$http",function(a,b,c,d,e){return{getCart:b(c+"/users/cart/get-product",null,{get:{method:"GET"}}),AddtoCart:b(c+"/users/cart/add-product",null,{get:{method:"POST"}}),UpdateToCart:b(c+"/users/cart/update-product",null,{get:{method:"POST"}}),RemoveCart:b(c+"/users/cart/remove-product",null,{get:{method:"DELETE"}}),CheckCoupon:b(c+"/coupons/is-valid/:coupon",{coupon:"@coupon"},{get:{method:"GET"}}),parseFeed:function(a){return e.jsonp("//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=50&callback=JSON_CALLBACK&q="+encodeURIComponent(a))}}}]),angular.module("eCommerceUserApp").factory("Category",["$resource","endpoint","sessionService",function(a,b,c){return{getCategory:a(b+"/users/category/get-categories",null,{get:{method:"GET"}}),getCategoryProduct:a(b+"/products/features",null,{get:{method:"GET"}}),getPage:a(b+"/pages/:id",{id:"@id"},{get:{method:"GET"}})}}]),angular.module("eCommerceUserApp").factory("Checkout",["$routeParams","$resource","endpoint","sessionService",function(a,b,c,d){return{addAddress:b(c+"/users/account/add-address",null,{get:{method:"POST"}}),addBillAddress:b(c+"/users/checkout/add-billaddress",null,{get:{method:"POST"}}),getAddress:b(c+"/users/checkout/get-address",null,{get:{method:"GET"}})}}]),angular.module("eCommerceUserApp").factory("ConfirmUser",["$routeParams","$resource","endpoint","sessionService",function(a,b,c,d){return{confirmCheck:b(c+"/users/confirmuser/"+a.id,null,{get:{method:"GET"}})}}]),angular.module("eCommerceUserApp").factory("Forgot",["$resource","endpoint",function(a,b){return a(b+"/users/forgot",null,{forgot:{method:"POST"}})}]),angular.module("eCommerceUserApp").factory("Main",["$routeParams","$resource","endpoint","sessionService",function(a,b,c,d){return console.log(b),{getHomepage:b(c+"/admin/home-page-settings",null,{get:{method:"GET"}}),getCountry:b(c+"/countries",null,{get:{method:"GET"}})}}]),angular.module("eCommerceUserApp").factory("newPassword",["$routeParams","$resource","endpoint","sessionService",function(a,b,c,d){return b(c+"/users/newpassword/"+a.id,null,{newpassword:{method:"POST"}})}]),angular.module("eCommerceUserApp").factory("Order",["$routeParams","$resource","endpoint","sessionService",function(a,b,c,d){return{getOrder:b(c+"/users/order/get-order",null,{get:{method:"GET",headers:{Authorization:d.get("user_token")}}})}}]),angular.module("eCommerceUserApp").factory("Payment",["$routeParams","$resource","endpoint","sessionService",function(a,b,c,d){return{saveOrder:b(c+"/users/checkout/buy-cart-completed",null,{get:{method:"POST",headers:{Authorization:d.get("user_token")}}}),openDownload:b(c+"/users/order/digital-products/:id",{id:"@id"},{get:{method:"GET",headers:{Authorization:d.get("user_token")}}})}}]),angular.module("eCommerceUserApp").factory("Product",["$routeParams","$resource","endpoint","sessionService",function(a,b,c,d){return{getTopProducts:b(c+"/users/product/get-products",null,{get:{method:"GET"}}),getBestSeller:b(c+"/users/product/best-sellers",null,{get:{method:"GET"}}),getTopRated:b(c+"/users/product/top-rated",null,{get:{method:"GET"}}),getBestOffer:b(c+"/users/product/best-offers",null,{get:{method:"GET"}}),getPopular:b(c+"/users/product/popular",null,{get:{method:"GET"}}),detailsProduct:b(c+"/users/product/get-single-product/:id",{id:"@id"},{get:{method:"GET"}}),cateProduct:b(c+"/users/product/get-products?category=:category",{category:"@category"},{get:{method:"GET"}}),AddtoCart:b(c+"/users/cart/add-product",null,{get:{method:"POST"}}),priceProduct:b(c+"/users/product/get-products?category=:category",{category:"@category"},{get:{method:"GET"}}),getAllProducts:b(c+"/users/product/get-products",null,{get:{method:"GET"}}),getRecentProducts:b(c+"/users/product/get-products",null,{get:{method:"GET"}}),checkReview:b(c+"/users/product/check-review/:id/:oid",{id:"@id",oid:"@oid"},{get:{method:"GET"}}),saveReview:b(c+"/users/product/save-review/:id/:oid",{id:"@id",oid:"@oid"},{get:{method:"POST"}}),addReturn:b(c+"/users/product/add-return/:id/:oid",{id:"@id",oid:"@oid"},{get:{method:"POST"}}),reviewDetails:b(c+"/users/product/get-review/:id",{id:"@id"},{get:{method:"GET"}}),detailsReturnProduct:b(c+"/users/product/get-returnproduct/:id/:oid",{id:"@id",oid:"@oid"},{get:{method:"GET"}}),getRecentViewProducts:b(c+"/users/product/get-products",null,{get:{method:"GET"}}),shopList:b(c+"/users/get-sellers",null,{get:{method:"GET"}}),shopTop:b(c+"/users/product/by/seller/:id/top-products",{id:"@id"},{get:{method:"GET"}}),shopProducts:b(c+"/users/product/get-products",{id:"@id"},{get:{method:"GET"}}),getAdmin:b(c+"/admin/settings",null,{get:{method:"GET"}})}}]),angular.module("eCommerceUserApp").factory("Register",["$resource","endpoint",function(a,b){return a(b+"/users/register",null,{register:{method:"POST"}})}]),angular.module("eCommerceUserApp").factory("search",["$resource","endpoint",function(a,b){return{searchProduct:a(b+"/users/product/get-products?name=:name",{name:"@name"},{get:{method:"GET"}}),searchPriceProduct:a(b+"/users/product/get-products",null,{get:{method:"GET"}})}}]),angular.module("eCommerceUserApp").factory("SocialLogin",["$resource","endpoint",function(a,b){return a(b+"/users/social_login",null,{sociallogin:{method:"POST"}})}]),angular.module("eCommerceUserApp").factory("UserAuth",["$resource","endpoint","sessionService",function(a,b,c){return a(b+"/users/login",null,{login:{method:"POST"}})}]);